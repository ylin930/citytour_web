<!doctype html>
<html lang="en">
<head>
    <meta name="ct-next" content="practice_task.html">
  <meta charset="utf-8" />
  <title>City Tour ‚Äì Practice Intro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
  <style>
    .video-wrap{position:relative;max-width:820px;margin:0 auto;border-radius:16px;overflow:hidden;box-shadow:0 8px 24px rgba(0,0,0,.12);background:#000}
    video{display:block;width:100%;height:auto}
    .overlay,.loading{position:absolute;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.35);color:#fff;font-weight:600}
    .hidden{display:none}
    #unmuteBtn{position:absolute;bottom:10px;right:12px;background:rgba(255,255,255,.9);padding:6px 10px;border-radius:8px;font-size:14px;cursor:pointer}
    #nextBtn[disabled]{opacity:.5;pointer-events:none}
  </style>
  <!-- Session-1 guard -->
  <script>
    const s = localStorage.getItem("ct_session");
    //if (s !== "1") location.replace("instructions.html");
  </script>
</head>
<body>
  <main class="container">
    <header class="header">
      <div>
        <div class="badge">CITY TOUR ‚Ä¢ PRACTICE</div>
        <div class="h1">Practice tour</div>
        <div class="sub">Watch this quick intro. ‚ÄúNext‚Äù unlocks when it ends.</div>
      </div>
    </header>

    <section class="grid">
      <div class="card" style="display:flex;flex-direction:column;gap:14px;align-items:center">
        <div class="video-wrap">
          <video id="vid" autoplay muted playsinline preload="auto"
                 poster="media/city0/city_intro.jpg"
                 controlslist="nodownload noplaybackrate nofullscreen" disablepictureinpicture>
            <source src="media/city0/animations/en/city_intro.mp4" type="video/mp4" />
          </video>
          <div id="loading" class="loading">Loading‚Ä¶</div>
          <div id="unmuteBtn" class="hidden">üîä Unmute</div>
        </div>

        <div class="buttons" style="justify-content:flex-end;width:100%">
          <button class="btn" onclick="history.back()">Back</button>
          <button id="nextBtn" class="btn primary" disabled>Next</button>
        </div>
      </div>
    </section>
  </main>

  <script>
    const v = document.getElementById("vid");
    const loading = document.getElementById("loading");
    const nextBtn = document.getElementById("nextBtn");
    const unmute = document.getElementById("unmuteBtn");

    v.addEventListener("canplay", ()=> loading.classList.add("hidden"));
    v.play().catch(()=>{/* user will click video to start if needed */});
    v.addEventListener("playing", ()=> unmute.classList.remove("hidden"));
    unmute.addEventListener("click", ()=>{
      v.muted = !v.muted;
      unmute.textContent = v.muted ? "üîá Unmute" : "üîä Mute";
    });
    v.addEventListener("ended", ()=> nextBtn.disabled = false);
    nextBtn.addEventListener("click", ()=> location.href = "practice_task.html");
  </script>
  <script src="js/dev-tools.js"></script>
</body>
</html>